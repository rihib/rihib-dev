# TODO: 個人サイト完成に向けた課題整理

このドキュメントは、現在のモック実装から実際に動作する個人サイトにするために必要な作業を整理したものです。

## 現在の状況

- ✅ フロントエンド：Next.js 14 + TypeScript + TailwindCSS で実装済み
- ✅ 国際化：日英切り替え機能完成
- ✅ ダークモード：完全実装済み
- ❌ バックエンド：未実装（モックデータのみ）
- ❌ データベース：未実装
- ❌ 認証：未実装
- ❌ デプロイ：未設定

## 技術スタック移行課題

### 1. ランタイム環境の変更

- **現在**: Node.js
- **目標**: Deno
- **課題**:
  - package.json から deno.json への移行
  - Node.js依存のライブラリ（Next.js）の Deno 対応検討
  - npm パッケージから Deno モジュールへの移行

### 2. モノレポ構成導入

- **現在**: シングルパッケージ構成
- **目標**: Turborepo
- **課題**:
  - フロントエンドとバックエンドの分離
  - 共通パッケージの抽出
  - turborepo.json 設定

## バックエンド実装課題

### 1. API サーバー構築

- **技術**: Hono + Cloudflare Workers
- **必要作業**:
  - [ ] Hono サーバーセットアップ
  - [ ] Cloudflare Workers 設定
  - [ ] wrangler.toml 設定
  - [ ] API エンドポイント設計・実装
    - [ ] `/api/v1/articles` - 記事メタデータ管理（blog/news統一）
    - [ ] `/api/v1/auth` - 認証エンドポイント
  - [ ] OpenAPI ドキュメント作成
    - [ ] API 仕様書の作成 (OpenAPI 3.0)
    - [ ] Swagger UI の設定
    - [ ] エンドポイントの詳細ドキュメント化

### 2. RPC レイヤー実装

- **技術**: Hono RPC
- **必要作業**:
  - [ ] Hono RPC クライアント設定
  - [ ] 型安全な API クライアント実装
  - [ ] フロントエンドとの統合

### 3. データベース実装

- **技術**: Drizzle ORM + Supabase
- **必要作業**:
  - [ ] Supabase プロジェクト作成
  - [ ] Drizzle ORM 設定（Supabase 統合）
  - [ ] データベーススキーマ設計
    - [ ] users テーブル（管理者用、Supabase Auth と連携）
    - [ ] articles テーブル（title, link, created_at, type のみ）
      - type カラムで blog/news を判別
  - [ ] マイグレーションファイル作成
  - [ ] シードデータ作成

## 認証システム実装課題

### 1. NextAuth 統合

- **技術**: NextAuth + Supabase
- **必要作業**:
  - [ ] Supabase プロジェクト作成（データベースと共通）
  - [ ] Supabase Auth 設定
  - [ ] NextAuth 設定（Supabase アダプター使用）
  - [ ] OAuth プロバイダー設定（Google/GitHub）
  - [ ] セッション管理実装

### 2. 管理者認証

- **必要作業**:
  - [ ] 管理者権限チェック実装
  - [ ] 保護されたルート設定
  - [ ] 管理者ダッシュボード作成

## コンテンツ管理システム実装課題

### 1. 管理者パネル

- **必要作業**:
  - [ ] `/admin` ルート実装
  - [ ] ログインページ実装
  - [ ] 記事管理画面（blog/news統一）
    - [ ] 記事一覧表示（タイプ別フィルタリング）
    - [ ] 記事メタデータ作成・編集フォーム（タイトル、リンク、作成日、タイプ）
    - [ ] 外部リンク管理（Qiita/Notion）

### 2. 動的コンテンツ表示

- **必要作業**:
  - [ ] 記事詳細ページ実装（外部リンクへのリダイレクト）
    - [ ] ブログ記事詳細ページ
    - [ ] お知らせ詳細ページ
  - [ ] モックデータからDB データへの切り替え

## UI/UX 改善課題

### 1. shadcn/ui 導入

- **必要作業**:
  - [ ] shadcn/ui セットアップ
  - [ ] 既存コンポーネントの shadcn/ui 移行
  - [ ] フォームコンポーネント実装
  - [ ] ダイアログ・モーダル実装

### 2. 追加機能

- **必要作業**:
  - [ ] 検索機能実装
  - [ ] タグ・カテゴリ機能
  - [ ] RSS フィード生成
  - [ ] SEO メタタグ最適化

## デプロイ・インフラ課題

### 1. デプロイメント環境設定

- **必要作業**:
  - [ ] Supabase 本番環境設定
  - [ ] Vercel デプロイメント設定（Next.js との相性を優先）
  - [ ] ドメイン設定（www.rihib.dev）
  - [ ] 環境変数設定（Supabase 接続情報等）

### 2. CI/CD パイプライン

- **必要作業**:
  - [ ] GitHub Actions によるデプロイ自動化
  - [ ] プレビュー環境設定
  - [ ] テスト自動化
  - [ ] デプロイ前の型チェック・リント

## 追加機能・改善課題

### 1. 分析・監視

- **必要作業**:
  - [ ] Google Analytics 設定
  - [ ] エラー監視システム
  - [ ] パフォーマンス監視

### 2. セキュリティ

- **必要作業**:
  - [ ] CSRF 対策
  - [ ] XSS 対策
  - [ ] セキュリティヘッダー設定
  - [ ] レート制限実装

### 3. パフォーマンス最適化

- **必要作業**:
  - [ ] 画像最適化
  - [ ] コード分割
  - [ ] キャッシュ戦略
  - [ ] CDN 設定

## 実装優先度

### Phase 1: 開発環境・技術スタック構築（最優先）

1. Deno 環境構築
   - [ ] deno.json 設定
   - [ ] Node.js から Deno への移行
   - [ ] 依存関係の Deno 対応確認
2. Turborepo 導入
   - [ ] turborepo.json 設定
   - [ ] モノレポ構成への移行
   - [ ] パッケージ分離（frontend/backend）
3. shadcn/ui 導入
   - [ ] shadcn/ui セットアップ
   - [ ] 既存コンポーネントの移行
   - [ ] UI コンポーネントライブラリ構築

### Phase 2: 基盤構築（高優先度）

1. Supabase プロジェクト作成と設定
2. Drizzle ORM + Supabase データベース設定
3. 基本的なデータスキーマ実装
4. Hono バックエンド API 実装
5. 既存モックデータのDB移行

### Phase 3: 管理機能（中優先度）

1. NextAuth + Supabase 認証システム実装
2. 管理者パネル実装
3. コンテンツ管理機能実装

### Phase 4: 追加機能（低優先度）

1. 検索・タグ機能
2. 分析・監視システム
3. パフォーマンス最適化

### Phase 5: デプロイ・最適化

1. Cloudflare 統合
2. CI/CD パイプライン構築
3. 本番環境設定

## 注意点

1. **技術スタック移行**: Node.js → Deno の移行は大規模な変更が必要
2. **モノレポ化**: 現在のシングルパッケージ構成から Turborepo への移行が必要
3. **データ移行**: 現在のモックデータを Supabase データベースに移行する必要
4. **Supabase 統合**: 認証、データベース、API の統合設定が必要
5. **コンテンツ管理**: 記事本文は外部サービス（Notion/Qiita）で管理し、メタデータのみDB管理

このリストを参考に、段階的な実装を進めることをおすすめします。

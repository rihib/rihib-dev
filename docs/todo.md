# TODO: 個人サイト完成に向けた課題整理

このドキュメントは、現在のモック実装から実際に動作する個人サイトにするために必要な作業を整理したものです。

## 現在の状況

- ✅ フロントエンド：Next.js 14 + TypeScript + TailwindCSS で実装済み
- ✅ 国際化：日英切り替え機能完成
- ✅ ダークモード：完全実装済み
- ❌ バックエンド：未実装（モックデータのみ）
- ❌ データベース：未実装
- ❌ 認証：未実装
- ❌ デプロイ：未設定

## 技術スタック移行課題

### 1. ランタイム環境の変更
- **現在**: Node.js
- **目標**: Deno
- **課題**: 
  - package.json から deno.json への移行
  - Node.js依存のライブラリ（Next.js）の Deno 対応検討
  - npm パッケージから Deno モジュールへの移行

### 2. モノレポ構成導入
- **現在**: シングルパッケージ構成
- **目標**: Turborepo
- **課題**:
  - フロントエンドとバックエンドの分離
  - 共通パッケージの抽出
  - turborepo.json 設定

## バックエンド実装課題

### 1. API サーバー構築
- **技術**: Hono + Cloudflare Workers
- **必要作業**:
  - [ ] Hono サーバーセットアップ
  - [ ] Cloudflare Workers 設定
  - [ ] wrangler.toml 設定
  - [ ] API エンドポイント設計・実装
    - [ ] `/api/blog` - ブログ記事メタデータ管理
    - [ ] `/api/news` - お知らせメタデータ管理
    - [ ] `/api/auth` - 認証エンドポイント

### 2. RPC レイヤー実装
- **技術**: Hono RPC
- **必要作業**:
  - [ ] Hono RPC クライアント設定
  - [ ] 型安全な API クライアント実装
  - [ ] フロントエンドとの統合

### 3. データベース実装
- **技術**: Drizzle ORM + Cloudflare D1
- **必要作業**:
  - [ ] Drizzle ORM 設定
  - [ ] Cloudflare D1 データベース作成
  - [ ] データベーススキーマ設計
    - [ ] users テーブル（管理者用）
    - [ ] blog_posts テーブル（title, link, created_at のみ）
    - [ ] news_items テーブル（title, link, created_at のみ）
  - [ ] マイグレーションファイル作成
  - [ ] シードデータ作成

## 認証システム実装課題

### 1. NextAuth 統合
- **技術**: NextAuth + Supabase
- **必要作業**:
  - [ ] NextAuth 設定（現在依存関係には含まれているが未設定）
  - [ ] Supabase プロジェクト作成
  - [ ] OAuth プロバイダー設定（Google/GitHub）
  - [ ] セッション管理実装

### 2. 管理者認証
- **必要作業**:
  - [ ] 管理者権限チェック実装
  - [ ] 保護されたルート設定
  - [ ] 管理者ダッシュボード作成

## コンテンツ管理システム実装課題

### 1. 管理者パネル
- **必要作業**:
  - [ ] `/admin` ルート実装
  - [ ] ログインページ実装
  - [ ] ブログ記事管理画面
    - [ ] 記事一覧表示
    - [ ] 記事メタデータ作成・編集フォーム（タイトル、リンク、作成日）
    - [ ] 外部リンク管理（Qiita/Notion）
  - [ ] お知らせ管理画面
    - [ ] お知らせ一覧表示
    - [ ] お知らせメタデータ作成・編集フォーム（タイトル、リンク、作成日）

### 2. 動的コンテンツ表示
- **必要作業**:
  - [ ] ブログ詳細ページ実装（外部リンクへのリダイレクト）
  - [ ] お知らせ詳細ページ実装（外部リンクへのリダイレクト）
  - [ ] モックデータからDB データへの切り替え

## UI/UX 改善課題

### 1. shadcn/ui 導入
- **必要作業**:
  - [ ] shadcn/ui セットアップ
  - [ ] 既存コンポーネントの shadcn/ui 移行
  - [ ] フォームコンポーネント実装
  - [ ] ダイアログ・モーダル実装

### 2. 追加機能
- **必要作業**:
  - [ ] 検索機能実装
  - [ ] タグ・カテゴリ機能
  - [ ] RSS フィード生成
  - [ ] SEO メタタグ最適化

## デプロイ・インフラ課題

### 1. Cloudflare 統合
- **必要作業**:
  - [ ] Cloudflare Pages 設定
  - [ ] Cloudflare Workers 設定
  - [ ] Cloudflare D1 データベース設定
  - [ ] Cloudflare R2 ストレージ設定（将来的な画像保存用）
  - [ ] ドメイン設定（www.rihib.dev）

### 2. CI/CD パイプライン
- **必要作業**:
  - [ ] GitHub Actions によるデプロイ自動化
  - [ ] プレビュー環境設定
  - [ ] テスト自動化
  - [ ] デプロイ前の型チェック・リント

## 追加機能・改善課題

### 1. 分析・監視
- **必要作業**:
  - [ ] Google Analytics 設定
  - [ ] エラー監視システム
  - [ ] パフォーマンス監視

### 2. セキュリティ
- **必要作業**:
  - [ ] CSRF 対策
  - [ ] XSS 対策
  - [ ] セキュリティヘッダー設定
  - [ ] レート制限実装

### 3. パフォーマンス最適化
- **必要作業**:
  - [ ] 画像最適化
  - [ ] コード分割
  - [ ] キャッシュ戦略
  - [ ] CDN 設定

## 実装優先度

### Phase 1: 基盤構築（高優先度）
1. Drizzle ORM + Cloudflare D1 データベース設定
2. 基本的なデータスキーマ実装
3. Hono バックエンド API 実装
4. 既存モックデータのDB移行

### Phase 2: 管理機能（中優先度）
1. NextAuth 認証システム実装
2. 管理者パネル実装
3. コンテンツ管理機能実装

### Phase 3: 追加機能（低優先度）
1. shadcn/ui 導入・UI改善
2. 検索・タグ機能
3. 分析・監視システム

### Phase 4: デプロイ・最適化
1. Cloudflare 統合
2. CI/CD パイプライン構築
3. パフォーマンス最適化

## 注意点

1. **技術スタック移行**: Node.js → Deno の移行は大規模な変更が必要
2. **モノレポ化**: 現在のシングルパッケージ構成から Turborepo への移行が必要
3. **データ移行**: 現在のモックデータを実際のデータベースに移行する必要
4. **Cloudflare 統合**: 複数のCloudflareサービスの連携設定が必要
5. **コンテンツ管理**: 記事本文は外部サービス（Notion/Qiita）で管理し、メタデータのみDB管理

このリストを参考に、段階的な実装を進めることをおすすめします。